<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Dashboard extends CI_Controller{	public function __construct(){		parent::__construct();		$this->sess_user();		$this->load->helper('assets');		$this->load->library('layout');		$this->load->library('pagination');		$this->load->model('Dashboard_model');		$this->load->model('RendezVous_model');		$this->layout->ajouter_css('layout');		setlocale(LC_TIME, "fr_FR");	}	public function index(){		$this->load->view('acceuil');	}	public function sess_user(){		if ( ! $this->session->userdata('nom') ) {			//redirect('Idenfication/index','refresh');			redirect();		}	}	public function pagination(){		$per_page = 10;		$config = array (					'base_url' => base_url().'Dashboard/acceuil/',					//'total_rows' => $this->db->get_where('rdv',"date >= date('Y-m-d')")->num_rows(),					'total_rows' => $this->db->get('rdv')->num_rows(),					'per_page' => $per_page,					'num_links' => 5,					'use_page_numbers' => TRUE,					'display_pages' => TRUE,					'uri_segment' => 3				);  	    return $config;	}	public function acceuil(){			$cfg = $this->pagination();		$this->pagination->initialize($cfg);		if($this->uri->segment(3)){			$page = ($this->uri->segment(3));		}		else		{			$page = 1;		}	 	$res = $this->RendezVous_model->getallRDV($cfg['per_page'],$page);		$this->layout->getId($this->session->userdata('nom'));		if ( !empty($res) ){			$i = 0;			foreach ($res as $key => $value) {								$data['row'][$i] = $value;				$status = $this->getStatus($data['row'][$i]->date);							/* A activer pour la modification automatique du statut */				if ( $status >= 0 ) { 					$data['row'][$i]->status = 'A venir';				}				else{					$data['row'][$i]->status = 'PassÃ©';				}				$i++;			}			$this->layout->view('acceuil',$data);		}		else{			$data['row'] = array();			$this->layout->view('acceuil',$data);		}	}	public function getStatus($date){		$Ddate = new DateTime("now");		$date_r = new DateTime($date);		$itv = $Ddate->diff($date_r);		return $itv->format('%R%a');	}}?>